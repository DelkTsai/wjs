/**
 * wJs v3.0
 *
 * Copyright Romain WEEGER 2010 / 2014
 * http://www.wexample.com
 *
 * Licensed under the MIT and GPL licenses :
 *
 *  - http://www.opensource.org/licenses/mit-license.php
 *  - http://www.gnu.org/licenses/gpl.html
 */
(function(e){var d;if(void 0===e.wjs||"[$version]"!==e.wjs.version)d=function(){this.extendObject(this,{window:e.window,document:e.document,version:"[$version]",readyCallbacks:[],readyComplete:!1,packageDefault:null,loaders:{},loadersExtra:[],loadersBuffer:{},extLoaded:{},extRequire:{},processProto:null,processes:[],classProtos:{},classMethods:{},settings:null,pull:this.extPull})},d.prototype={init:function(a){this.window.onload=function(){this.extendObject(this,a);this.loaderBufferFlush();delete this.loaderBufferFlush;
  this.unpack(this.packageDefault,this.onloadComplete.bind(this))}.bind(this)},onloadComplete:function(){var a,b;this.readyComplete=!0;a=0;for(b=this.readyCallbacks.length;a<b;a+=1)this.readyCallbacks[a].call(this),delete this.readyCallbacks[a]},ready:function(a){!0===this.readyComplete?a():this.readyCallbacks.push(a)},unpack:function(a,b){(new this.processProto(this.extendOptions(b))).responseParse(a)},loaderAdd:function(a,b){b=b||{};if(void 0!==this.loadersBuffer)this.loadersBuffer[a]=b;else if(!this.loaders[a]){var c=
  "WjsLoader"+this.upperCaseFirst(a);b.type=a;b.classExtends=b.classExtends||"WjsLoader";this.classExtend(c,b);this.loaders[a]=new (this.classProto(c))(a);this.extLoaded[a]={};this.extRequire[a]={}}},loaderGet:function(a){this.loaders[a]||(-1!==this.loadersExtra.indexOf(a)?this.extPull("wjsLoader",a):this.error('Undefined loader "'+a+'"'));return this.loaders[a]},loaderDestroy:function(a){this.extDestroy("wjsLoader",a);this.classProtoDestroy("WjsLoader"+this.upperCaseFirst(a));delete this.loaders[a];
  delete this.extLoaded[a];delete this.extRequire[a]},loaderBufferFlush:function(){var a,b=this.loadersBuffer;delete this.loadersBuffer;for(a in b)b.hasOwnProperty(a)&&this.loaderAdd(a,b[a])},extPull:function(a,b,c){var d;d=this.extGet(a,b);var e=this.processes,f=e.length;c=this.extendOptions(c)||{};c.async=c.async||void 0!==c.complete;if(d&&!1!==this.loaderGet(a).preventReload&&!0!==c.reload)c.complete&&c.complete(d);else{for(d=0;d<f;d++)if(e[d].parseQ[a]&&e[d].parseQ[a][b]){e[d].responseParseItem(a,
  b);return}this.loaderGet(a).extLoad(b,c)}return this.extGet(a,b)},extPullMultiple:function(a){var b,c;for(b in a)if(a.hasOwnProperty(b))for(c=0;c<arguments.length;c++)this.extPull(b,a[b][c])},extGet:function(a,b){var c=this.extLoaded[a];return c&&c.hasOwnProperty(b)?c[b]:!1},extDestroy:function(a,b,c){if(this.extGet(a,b)){var d,e=this.extRequire[a][b];if(e&&c){for(d in e)if(e.hasOwnProperty(d))for(c=0;c<e[d].length;c++)this.extDestroy(d,e[d][c]);delete this.extRequire[a][b]}delete this.extLoaded[a][b]}},
  remoteRequest:function(a){a.method=a.method||"GET";a.async=a.async||!1;var b=new this.window.XMLHttpRequest;b.open(a.method,a.url,a.async);b.onreadystatechange=function(){4===b.readyState&&(200===b.status?a.success&&"function"===typeof a.success&&a.success(b):a.error(b))};"POST"===a.method&&b.setRequestHeader("Content-type","application/x-www-form-urlencoded");b.send(this.param(a.data))},param:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b+"="+a[b]);return c.join("&")},extendObject:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},extendOptions:function(a,b){a?"function"===typeof a&&(a={complete:a}):a={};return b?this.extendObject(a,this.extendOptions(b)):a},extendProto:function(a,b){for(var c in b)b.hasOwnProperty(c)&&Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c));return a},objectIsEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},upperCaseFirst:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},classExtend:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          b){this.classMethods[a]?this.extendProto(this.classMethods[a],b):this.classMethods[a]=b},classProto:function(a){if(!this.classProtos[a]){var b,c=Object;(b=(b=this.classMethods[a])&&b.classExtends?b.classExtends:!1)&&(c=this.classProto(b));b=this.classProtos[a]=function(){return this.__construct?this.__construct.apply(this,arguments):null};b.prototype=Object.create(c.prototype);this.extendObject(b.prototype,{constructor:c,className:a,wjs:this})}this.classMethods[a]&&this.extendProto(this.classProtos[a].prototype,
    this.classMethods[a]);return this.classProtos[a]},classProtoDestroy:function(a){this.classProtos[a]&&delete this.classProtos[a];this.classMethods[a]&&delete this.classMethods[a]},error:function(a,b){if(!b&&this.window.console)this.window.console.error("[wjs error] : "+a);else throw Error("[wjs error] : "+a);}},e["wjs-[$version]"]=new d,e.wjs||(e.wjs=e["wjs-[$version]"])})(window);
(function(e){e.classExtend("WjsLoader",{type:"undefined",preventReload:!0,__construct:function(){for(this.parseHook="parse"+this.wjs.upperCaseFirst(this.type);"string"===typeof this.parseHook;)this.parseHook=this[this.parseHook]||!1},extLoad:function(d,a){this.processSingle(a,{mode:"server",name:d})},processSingle:function(d,a){a.type=this.type;var b=new this.wjs.processProto(this.wjs.extendOptions(d,{mainType:this.type,mainName:a.name}));b.extRequestAdd(a);b.loadingStart()},responseParseItem:function(d,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           a,b){if(void 0!==a["#require"]&&(this.wjs.extRequire[this.type][d]=this.wjs.extRequire[this.type][d]||{},this.wjs.extendObject(this.wjs.extRequire[this.type][d],a["#require"]),this.requireMissing(a["#require"]))){d=a["#require"];a["#require"]=void 0;this.wjs.extPullMultiple(d);return}a=a["#data"];this.parseHook&&(a=this.parseHook(d,a,b));!1!==a&&b.parseItemComplete(this.type,d,a)},requireMissing:function(d){var a,b,c;for(a in d)if(d.hasOwnProperty(a))for(b=0,c=d[a].length;b<c;b++)if(!1===this.wjs.extGet(a,
  d[a][b]))return!0;return!1}})})(wjs);
(function(e){var d=function(a){a=a||{};e.extendObject(this,{wjs:e,parseQ:{},async:a.async||!1,completeCallback:a.complete,loadingStarted:!1,extensionRequests:[],mainType:a.mainType,mainName:a.mainName});e.processes.push(this)};d.prototype={extRequestAdd:function(a){!1===this.loadingStarted?this.extensionRequests.push(a):this.wjs.error("Try to add extensions request after process start.")},loadingStart:function(){this.loadingStarted=!0;var a,b=this.extensionRequests,c=this.extensionRequests.length,
  d={},e={};for(a=0;a<c;a++)switch(b[a].mode){case "server":d["wjs["+a+"][t]"]=b[a].type;d["wjs["+a+"][n]"]=b[a].name;break;case "parse":void 0===e[b[a].type]&&(e[b[a].type]={}),e[b[a].type][b[a].name]={"#data":!0}}this.wjs.objectIsEmpty(d)?this.responseParse(e):this.wjs.remoteRequest({url:this.wjs.settings.responsePath+"?"+this.wjs.param(d)+this.wjs.settings.responseQueryExtraParam,method:"GET",async:this.async,success:function(a){this.wjs.extendObject(e,JSON.parse(a.responseText));this.responseParse(e)}.bind(this)})},
  loadingComplete:function(){this.wjs.processes.splice(this.wjs.processes.indexOf(this),1);if("function"===typeof this.completeCallback){var a;this.mainType&&this.mainName&&(a=this.wjs.extLoaded[this.mainType][this.mainName]);this.completeCallback(a)}Object.freeze(this)},responseParse:function(a){this.wjs.extendObject(this.parseQ,a);this.responseParseNext()},responseParseNext:function(){var a,b,c=this.parseQ;for(a in c)if(c.hasOwnProperty(a)&&this.wjs.loaders[a])for(b in c[a])if(c[a].hasOwnProperty(b)){this.responseParseItem(a,
    b);return}this.wjs.objectIsEmpty(c)||this.wjs.error("Parse queue not empty.");this.loadingComplete()},responseParseItem:function(a,b){this.wjs.loaderGet(a).responseParseItem(b,this.parseQ[a][b],this)},parseItemComplete:function(a,b,c){this.wjs.extLoaded[a][b]=c;delete this.parseQ[a][b];this.wjs.objectIsEmpty(this.parseQ[a])&&delete this.parseQ[a];this.responseParseNext()}};e.processProto=d})(wjs);
(function(e){e.loaderAdd("jsScript",{parseJsScript:function(d,a,b){if("function"!==typeof a)return eval(a),a}})})(wjs);(function(e){e.loaderAdd("wjsLoader",{classExtends:"WjsLoaderJsScript",parseWjsLoader:function(d,a,b){if(!0===a)this.wjs.loaderAdd(d);else return this.parseJsScript(d,a,b)}})})(wjs);