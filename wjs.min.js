// wJs v3.3.6 - (c) Romain WEEGER 2010 / 2015 - www.wexample.com | MIT and GPL licenses
(function(g){var n;if(void 0===g.wjs||"3.3.6"!==g.wjs.version)n=function(){this.extendObject(this,{context:g,window:g.window||window,document:g.document||window.document,version:"3.3.6",readyCallbacks:[],readyComplete:!1,packageDefault:null,loaders:{},loadersExtra:[],loadersBasic:[],extLoaded:{WjsLoader:{}},extRequire:{},processProto:null,processes:[],processCounter:0,processStack:[],processParent:void 0,classProtos:{},classMethods:{},cacheBuffer:{},cacheReg:{},settings:null,linkReg:/^wjs:\/\/([a-zA-Z0-9]*):([a-zA-Z0-9]*)$/});
this.context.wjsContext=g},n.prototype={init:function(b){var a=this;this.window.addEventListener("load",function(){a.extendObject(a,b);for(var c=0;c<a.loadersBasic.length;c++)a.loaderAdd(a.loadersBasic[c],void 0,!0);a.ready(function(){a.linksInit(a.document.body)});(new a.processProto(null,{complete:function(){delete a.packageDefault;a.readyComplete=!0;a.callbacks(a.readyCallbacks)}})).responseParse(a.packageDefault)})},ready:function(b){!0===this.readyComplete?this.window.setTimeout(function(){b()}):
this.readyCallbacks.push(b)},callbacks:function(b,a){for(var c=0;c<b.length;c++)b[c].apply(this,a)},linksInit:function(b){b=b.querySelectorAll('a[href^="wjs://"]');for(var a=0,c,d=function(){return!1};a<b.length;a++)c=b[a].getAttribute("href"),b[a].setAttribute("href","#"),b[a].onclick=d,b[a].setAttribute("data-wjs-link",c),b[a].addEventListener("click",this.linksClick.bind(this))},linksClick:function(b){var a=this,c=b.target.getAttribute("data-wjs-link").match(a.linkReg);a.loadersExists([c[1]],function(){a.loaders[c[1]].link(c[2])});
return!1},loaderAdd:function(b,a,c){a=a||{};if(!this.loaders[b]){var d="WjsLoader"+b;a.type=b;a.classExtends=a.classExtends||"WjsLoader";this.classExtend(d,a);this.loaders[b]=new (this.classProto(d))(b);this.extRequire[b]={};this.extLoaded[b]=this.extLoaded[b]||{};c&&(this.extLoaded.WjsLoader[b]=a)}},loadersExists:function(b,a){for(var c=0,d=[];c<b.length;c++)this.loaders[b[c]]||d.push(b[c]);return 0<d.length?new this.processProto({WjsLoader:d},{stacked:!1,complete:a}):a()},processFor:function(b,
a){for(var c=0,d,c=0;c<this.processes.length;c++)for(d=0;d<this.processes[c].extRequests.length;d++)if(this.processes[c].extRequests[d].type===b&&this.processes[c].extRequests[d].name===a)return this.processes[c]},use:function(b,a,c){if("string"===typeof b){var d={};d[b]=[a];a=c;b=d}return new this.processProto(b,a)},get:function(b,a){var c=this.extLoaded[b];return c&&c.hasOwnProperty(a)?c[a]:!1},destroy:function(b,a,c){var d=this,e={};e[b]=[a];if(c&&c.async)delete c.async,d.window.setTimeout(function(){d.destroy(b,
a,c)});else return c="boolean"===typeof c?{dependencies:c}:c,c=d.extendOptions(c,{destroy:!0}),new d.processProto(e,c)},destroyRequest:function(b,a,c,d){var e=this;if("WjsLoader"!==a||"WjsLoader"!==c&&"JsLink"!==c&&-1===e.loadersBasic.indexOf(c)){var f=e.extRequire[a]?e.extRequire[a][c]:null,l=a+"::"+c,h=e.cacheReg[l];b[a]=b[a]||[];b[a].push(c);h&&(e.destroyRequest(b,"CacheLink",h,d),delete e.cacheReg[l]);f&&d.dependencies&&e.regEach(f,function(f,h){e.requireShared(a,c,f,h)||e.destroyRequest(b,f,
h,d)})}},requireShared:function(b,a,c,d){var e=Object.keys(this.extRequire),f,l,h;for(l=0;l<e.length;l++)for(f=Object.keys(this.extRequire[e[l]]),h=0;h<f.length;h++)if(e[l]!==b&&f[h]!==a&&this.extRequire[e[l]][f[h]][c]&&-1!==this.extRequire[e[l]][f[h]][c].indexOf(d))return!0;return!1},regEach:function(b,a){for(var c=0,d,e=Object.keys(b);c<e.length;c++)for(d=0;d<b[e[c]].length;d++)if(!1===a.call(this,e[c],b[e[c]][d]))return!1;return!0},regRem:function(b,a,c){delete b[a][c];this.objectIsEmpty(b[a])&&
delete b[a]},regNext:function(b){var a=Object.keys(b)[0],c;return a&&(c=Object.keys(b[a])[0])?{type:a,name:c,data:b[a][c]}:!1},ajax:function(b){b.method=b.method||"GET";b.async=b.async||!1;var a=new this.window.XMLHttpRequest;a.open(b.method,b.url,b.async);a.onreadystatechange=function(){4===a.readyState&&(200===a.status?b.success&&"function"===typeof b.success&&b.success(a):b.error(a))};"POST"===b.method&&a.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.send(b.data?this.param(b.data):
void 0)},param:function(b){var a,c=[],d=Object.keys(b);for(a=0;a<d.length;a++)c.push(d[a]+"="+b[d[a]]);return c.join("&")},extendObject:function(b,a,c){for(var d=0,e=Object.keys(a),f;d<e.length;d++)f=e[d],c&&"object"===typeof a[f]?(b[f]=b[f]||{},this.extendObject(b[f],a[f])):b[f]=a[f];return b},extendOptions:function(b,a){b?"function"===typeof b&&(b={complete:b}):b={};return a?this.extendObject(b,this.extendOptions(a)):b},extendProto:function(b,a){var c,d=Object.keys(a);for(c=0;c<d.length;c++)Object.defineProperty(b,
d[c],Object.getOwnPropertyDescriptor(a,d[c]));return b},objectIsEmpty:function(b){for(var a in b)if(b.hasOwnProperty(a))return!1;return!0},classExtend:function(b,a){this.classMethods[b]?this.extendProto(this.classMethods[b],a):this.classMethods[b]=a},classProto:function(b){if(!this.classProtos[b]){var a,c=Object;(a=(a=this.classMethods[b])&&a.classExtends?a.classExtends:!1)&&(c=this.classProto(a));a=this.classProtos[b]=function(){return this.__construct?this.__construct.apply(this,arguments):null};
a.prototype=Object.create(c.prototype);this.extendObject(a.prototype,{constructor:c,className:b,wjs:this})}this.classMethods[b]&&this.extendProto(this.classProtos[b].prototype,this.classMethods[b]);return this.classProtos[b]},classProtoDestroy:function(b){this.classProtos[b]&&delete this.classProtos[b];this.classMethods[b]&&delete this.classMethods[b]},cacheHandle:function(b,a,c){var d=this.loaders[b].cacheHandler[a],e=this.cacheBuffer;d?d.cacheHandle(b,a,c):(e[b]=e[b]||{},e[b][a]=c)},onload:function(b,
a){var c=!1,d=function(){c=!0;b.removeEventListener("load",d);a()};b.addEventListener("load",d);this.window.setTimeout(function(){c||a()},200)},err:function(b,a){if(!a&&this.window.console)this.window.console.error("[wjs error] : "+b);else throw new this.window.Error("[wjs error] : "+b);}},g["wjs-3.3.6"]=new n,g.wjs||(g.wjs=g["wjs-3.3.6"]),g.wjs.classExtend("WjsLoader",{type:"",preventReload:!0,processType:"server",__construct:function(){this.cacheHandler={}},__destruct:function(){},init:function(){},
parse:function(b,a,c){return a},link:function(b){this.wjs.use(this.type,b)},destroy:function(b,a){return!0},extRequestUse:function(b,a){return{mode:this.processType,type:this.type,name:b}},extRequestDestroy:function(b,a){return{mode:"parse",type:this.type,name:b}}}),n=function(b,a){var c=this,d=g.wjs;a=d.extendOptions(a||{});!a.processParent&&d.processParent&&(a.processParent=d.processParent);d.extendObject(c,{id:d.processCounter++,wjs:d,destroy:a.destroy||!1,booted:!1,parseQ:{},async:a.async||!1,
callbacks:a.complete?[a.complete]:[],extRequests:[],exclude:a.exclude,stacked:void 0!==a.stacked?a.stacked:!0,request:b,options:a,next:[],processStack:[],output:{}});c.wjs.processes.push(c);b&&d.loadersExists(Object.keys(b),function(){c.boot()})},n.prototype={boot:function(){var b=this,a=b.wjs,c=b.request,d={},e,f="extRequest"+(b.destroy?"Destroy":"Use"),l={};if(!0!==b.booted){b.booted=!0;if(b.stacked&&(e=b.options.processParent?b.options.processParent.processStack:b.wjs.processStack,-1===e.indexOf(this)&&
e.push(this),0!==e.indexOf(this))){b.booted=!1;return}b.destroy&&(a.regEach(c,function(c,e){a.destroyRequest(d,c,e,b.options)}),c=d);a.regEach(c,function(c,d){var e=a.processFor(c,d);if(e&&e!==b)return e.next.push(b),!1})?a.regEach(c,function(d,e){var k,g;(k=a.get(d,e))&&b.options.reload&&(k=!1,delete a.extLoaded[d][e],a.cacheReg[d+"::"+e]&&delete a.extLoaded.CacheLink[a.cacheReg[d+"::"+e]]);if(k&&!1===b.destroy)b.output[d]=b.output[d]||{},b.output[d][e]=k;else if(a.loaders[d]){for(k=0;k<a.processes.length;k++)if(g=
a.processes[k],g.destroy===b.destroy&&g.parseQ[d]&&g.parseQ[d][e])return b.booted=!1,b.loadingComplete(!0),g.itemParse(d,e,function(){return a.use(c,b.options)}),!1;b.extRequests.push(a.loaders[d][f](e,b))}else l[d]=l[d]||{},l[d][e]={"#data":"WJS_ERR_PULL_UNDEFINED_LOADER"},b.wjs.err("Load error for WJS_ERR_PULL_UNDEFINED_LOADER")})&&b.loadingStart(l):b.booted=!1}},loadingStart:function(b){var a,c,d,e=this,f=e.wjs,g=e.extRequests,h,m=f.settings,k={};b=b||{};for(a=0;a<g.length;a++)switch(h=g[a],c=
h.type,d=h.name,h.mode){case "server":c=m.paramInc+"["+c+"]";k[c]=k[c]?k[c]+","+d:d;break;case "parse":b[c]=b[c]||{},b[c][d]={"#data":h.data}}if(f.objectIsEmpty(k))e.responseParse(b);else{if(e.exclude)if(!0===e.exclude)k[m.paramExc]="1";else for(c=Object.keys(e.exclude),a=0;a<c.length;a++)k[m.paramExc+"["+c[a]+"]"]=e.exclude[c[a]].join(",");m.cacheToken&&(k[m.paramToken]=m.cacheToken);f.ajax({url:m.responsePath+"?"+f.param(k)+m.paramExtra,method:"GET",async:e.async,success:function(a){f.extendObject(b,
JSON.parse(a.responseText),!0);e.responseParse(b)}})}},loadingComplete:function(b){var a=this.wjs,c=0,c=a.processParent,d;a.processes.splice(a.processes.indexOf(this),1);b||(a.processParent=this,a.callbacks(this.callbacks,[this.output,this]),a.processParent=c);Object.freeze(this);if(this.stacked&&-1!==d&&(a=this.options.processParent?this.options.processParent.processStack:this.wjs.processStack,d=d=a.indexOf(this),-1!==d&&(a.splice(a.indexOf(this),1),!b)))for(c=0;c<a.length;c++)a[c].boot();for(c=
0;c<this.next.length;c++)this.next[c].boot()},responseParse:function(b){var a=this;a.wjs.extendObject(a.parseQ,b,!0);a.wjs.loadersExists(Object.keys(a.parseQ),function(){a.responseParseNext()})},responseParseNext:function(){var b=this.wjs,a,c=this.parseQ;this.destroy&&c.WjsLoader&&1<Object.keys(c).length&&(c=b.extendObject({},c,!0),delete c.WjsLoader);for(;a=b.regNext(c);){if(this.destroy){this.itemDestroy(a.type,a.name);return}if(!b.get(a.type,a.name)){this.itemParse(a.type,a.name);return}b.regRem(c,
a.type,a.name)}0<Object.keys(c).length&&this.wjs.err("Parse queue not empty.");this.loadingComplete()},itemParse:function(b,a,c){var d=this,e=d.wjs,f=d.parseQ[b][a];c&&(f["#callbacks"]=f["#callbacks"]||[],f["#callbacks"].push(c));if(void 0!==f["#require"]&&(e.extRequire[b][a]=e.extRequire[b][a]||{},e.extendObject(e.extRequire[b][a],f["#require"]),d.requireMissing(f["#require"]))){c=f["#require"];f["#require"]=void 0;e.use(c,{stacked:!1,complete:function(){d.itemParse(b,a)}});return}"string"===typeof f["#data"]&&
0===f["#data"].indexOf("cache://")?(e.cacheReg[b+"::"+a]=f["#data"].split("://")[1],e.cacheBuffer[b]&&e.cacheBuffer[b][a]?d.cacheHandle(b,a,e.cacheBuffer[b][a]):e.loaders[b].cacheHandler[a]=d):d.cacheHandle(b,a,f["#data"])},cacheHandle:function(b,a,c){var d=this.wjs,e=d.loaders[b],f=d.cacheBuffer[b],g=e?e.cacheHandler:!1;"string"===typeof c&&0===c.indexOf("WJS_ERR_")?(d.err("Parse error for "+b+"::"+a+" : "+c),c=new d.window.Error(c)):c=e.parse(a,c,this);g[a]&&delete g[a];f&&f[a]&&(delete f[a],d.objectIsEmpty(f)&&
delete d.cacheBuffer[b]);!1!==c&&this.itemParseComplete(b,a,c)},itemParseComplete:function(b,a,c){var d=this.parseQ[b][a]["#callbacks"];this.wjs.extLoaded[b]&&(this.wjs.extLoaded[b][a]=c,this.output[b]=this.output[b]||[],this.output[b][a]=c);this.wjs.regRem(this.parseQ,b,a);d?this.wjs.callbacks(d):this.responseParseNext()},itemDestroy:function(b,a){var c=this.wjs,d=this.wjs.get(b,a);c.loaders[b]&&!1!==d&&!1===c.loaders[b].destroy(a,d,this)||this.itemDestroyComplete(b,a)},itemDestroyComplete:function(b,
a){var c=this.wjs;c.regRem(this.parseQ,b,a);this.wjs.loaders[b]&&(delete c.extLoaded[b][a],delete c.extRequire[b][a]);this.responseParseNext()},requireMissing:function(b){var a=this.wjs,c=!1;a.regEach(b,function(b,e){if(!1===a.get(b,e))return c=!0,!1});return c}},g.wjs.processProto=n,g.wjs.loaderAdd("JsLink",{processType:"parse",destroy:function(b,a){a.parentNode.removeChild(a);return!0},parse:function(b,a,c){var d=this.type,e=this.wjs.document.createElement("script");a=a||b;if(!(a instanceof this.wjs.window.Error))return this.wjs.onload(e,
function(){c.itemParseComplete(d,b,e)}),e.setAttribute("src",a),this.wjs.document.head.appendChild(e),!1}},!0),g.wjs.loaderAdd("WjsLoader",{classExtends:"WjsLoaderJsLink",processType:"server",destroy:function(b){var a=this.wjs;a.loaders[b]&&(a.loaders[b].__destruct(),a.classProtoDestroy("WjsLoader"+b),delete a.loaders[b],delete a.extLoaded[b],delete a.extRequire[b]);return!0},parse:function(b,a,c){if(!0===a)this.wjs.loaderAdd(b);else return this.wjs.loaders.JsLink.parse.apply(this,[b,a,c])}},!0)})(window);
