(function(d){d.register("Plugin","ClipDrag",{classExtends:"BasicPlugin",states:{mousePosition:{},dragdropPressed:!1,mouseStartX:null,mouseStartY:null},options:{autoStart:{defaults:!0},direction:{defaults:"xy"},handle:{defaults:null}},__construct:function(){this.wjs.inheritMethod(this,"__construct",arguments);this.autoStart&&this.domListen(this.binder.dom,"mousedown","clipMouseDown")},exit:function(){this.autoStart||this.domForget(this.binder.dom,"mousedown","clipMouseDown");this.wjs.inheritMethod(this,
"exit",arguments)},dragdropPress:function(a,c){this.mouseStartX=a;this.mouseStartY=c;this.clipStartX=this.binder.left;this.clipStartY=this.binder.top;this.binder.stage.dom.classList.add("ClipDragMouseDragging");this.handle&&this.handle.classList.add("ClipDragMouseDraggingHandle");this.stateSet("dragdropPressed",!0)},dragdropRelease:function(){this.mouseStartX=this.mouseStartY=this.clipStartX=this.clipStartY=null;this.binder.stage.dom.classList.remove("ClipDragMouseDragging");this.handle&&this.handle.classList.remove("ClipDragMouseDraggingHandle");
this.stateSet("dragdropPressed",!1)},callbacks:{stateSet:{dragdropPressed:function(a){a?(this.domListen(this.wjs.window,"mouseup","dragdropPressedMouseUp"),this.domListen(this.wjs.window,"mousemove","dragdropPressedMouseMove")):(this.domForget(this.wjs.window,"mouseup","dragdropPressedMouseUp"),this.domForget(this.wjs.window,"mousemove","dragdropPressedMouseMove"))}},domListen:{clipMouseDown:function(a){a.preventDefault();this.dragdropPress(a.clientX,a.clientY)},dragdropPressedMouseMove:function(a){a.preventDefault();
var c=a.clientX;a=a.clientY;var b=this.direction;if("xy"===b||"y"===b)this.binder.top=this.clipStartY-(this.mouseStartY-a);if("xy"===b||"x"===b)this.binder.left=this.clipStartX-(this.mouseStartX-c);this.binder.render()},dragdropPressedMouseUp:function(a){this.dragdropRelease()}}}})})(WjsProto);