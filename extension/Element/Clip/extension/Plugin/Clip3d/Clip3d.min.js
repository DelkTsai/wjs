// @require JsClass > Object3d
// @require JsClass > MathMatrix4
// @require JsClassStatic > Math
(function(e){e.register("Plugin","Clip3d",{binderInit:function(b){b.object3d=new (this.wjs.classProto("Object3d"))(0,1,0)},matrixToCss:function(b){return"matrix3d("+Array.prototype.slice.call(b.elements).join(",")+")"},overrides:{variables:{rotateH:0,rotateP:0,rotateB:0,translateX:0,translateY:0,translateZ:0},methods:{renderReset:function(b){var c=this.__base(),a=this.object3d;a.position.x=a.position.y=a.position.z=a.quaternion.x=a.quaternion.y=a.quaternion.z=0;a.quaternion.w=1;a.updateMatrix();a.updateMatrixWorld();
this.clip3dTranslate(c,b);this.clip3dRotate(c,b);return c},clip3dRotate:function(b,c){var a=this.object3d,d=this.wjs.Math;a.rotateX(d.degToRad(this.rotateH));a.rotateY(d.degToRad(this.rotateP));a.rotateZ(d.degToRad(this.rotateB))},clip3dTranslate:function(b,c){var a=this.object3d;a.translateX(this.translateX);a.translateY(-this.translateY);a.translateZ(-this.translateZ)},renderDom:function(b,c){var a=this.object3d;a.updateMatrix();this.renderDomMatrix(a.matrixWorld,c);this.__base(b)},renderDomMatrix:function(b,
c){this.stage.cameraWorldPosition&&(this.distanceToCamera=this.object3d.getWorldPosition().distanceTo(this.stage.cameraWorldPosition));this.dom.style.transform=c.matrixToCss(b)}}}})})(WjsProto);