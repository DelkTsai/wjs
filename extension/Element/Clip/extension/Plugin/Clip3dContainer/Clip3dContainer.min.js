// @require Plugin > Stage3d
// @require Plugin > Clip3dContainerChild
// @require JsMethod > arrayDeleteItem
(function(c){c.register("Plugin","Clip3dContainer",{options:{radius:100,pluginChild:"Clip3dContainerChild"},required:[{type:"Clip3d"}],pluginInit:function(){this.wjs.inheritMethod(this,"pluginInit",arguments);this.pluginClip3dContainerChild=this.wjs.loaders.Plugin.instance(this.pluginChild,{pluginParent:this});this.pluginClip3dContainerChild.pluginParent=this},binderInit:function(a){this.wjs.inheritMethod(this,"binderInit",arguments);this.stage3dPlugin||(this.stage3dPlugin=a.stage.pluginAdd("Stage3d"))},
overrides:{variables:{perspective:1E3},methods:{globalChildAppend:function(a,b){a.pluginAdd(b.pluginClip3dContainerChild);a.object3d.parent=this.object3d;this.stage.child3dSort.push(a);return this.__base(a)},globalChildRemove:function(a,b){a.plugins[b.type]&&a.pluginRemove(b.pluginClip3dContainerChild);this.wjs.arrayDeleteItem(this.stage.child3dSort,a);return this.__base(a)},renderDomMatrix:function(){this.object3d.updateMatrixWorld();this.dom.style.perspective=this.perspective+"px"},render:function(){this.stage.cameraWorldPosition=
this.stage.camera.getWorldPosition();this.__base();this.stage.renderSortZ()}}}})})(WjsProto);