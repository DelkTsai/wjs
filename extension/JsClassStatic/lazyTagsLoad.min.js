(function(n){n.addJsClassStatic("lazyTagsLoad",{destinationRoutes:[],destinationActivated:{},destinationOriginalHtml:{},typesCounter:{},wjs:n.wjs,screenWidth:0,screenHeight:0,processing:!1,__construct:function(){var a=this,b=a.wjs,c=a.onScreenChange.bind(a);b.ready(function(){a.tagsDetect(b.document);a.tagsVisibleActivateAll();b.window.addEventListener("scroll",c);b.window.addEventListener("resize",c)})},onScreenChange:function(){this.tagsVisibleActivateAll()},tagsDetect:function(a){var b=0;for(a=
a.querySelectorAll("[data-wjs]");b<a.length;b++)-1===this.destinationRoutes.indexOf(a[b])&&this.destinationRoutes.push(a[b])},tagsVisibleActivateAll:function(){for(var a=0,b=[],c=this.wjs,d,e,f,g,h,k={},l=c.window.pageYOffset||c.document.documentElement.scrollTop,m=c.window.pageXOffset||c.document.documentElement.scrollLeft;a<this.destinationRoutes.length;a++)g=this.destinationRoutes[a],f=g.getBoundingClientRect(),h=this.destinationActivated[a],e=this.tagType(g),d=e.type,e=e.name,f.top+l<c.window.innerHeight+
l&&f.top+f.height+l>l&&f.left+m<c.window.innerWidth+m&&f.left+f.width+m>m?h||(this.destinationActivated[a]=g,(f=c.get(d,e))?this.tagFill(d,e,g,f):(b[d]=b[d]||{},b[d][e]=b[d][e]||[],b[d][e].push(g),k[d]=k[d]||[],-1===k[d].indexOf(e)&&k[d].push(e))):h&&this.tagEmpty(d,e,g);c.use(k,{destination:!1,lazyVisible:b,complete:this.useComplete.bind(this)})},tagType:function(a){a=a.getAttribute("data-wjs").split(":");return{type:a[0],name:a[1]}},tagFill:function(a,b,c,d){this.destinationOriginalHtml[this.destinationRoutes.indexOf(c)]=
c.innerHTML;c.appendChild(d.dom.cloneNode(!0));this.typesCounter[a]=this.typesCounter[a]||{};this.typesCounter[a][b]=this.typesCounter[a][b]||0;this.typesCounter[a][b]++},tagEmpty:function(a,b,c){var d=this.destinationRoutes.indexOf(c);if(-1!==d){for(;c.firstChild;)c.removeChild(c.firstChild);c.innerHTML=this.destinationOriginalHtml[d];delete this.destinationActivated[d];delete this.destinationOriginalHtml[d];this.typesCounter[a][b]--;0===this.typesCounter[a][b]&&this.wjs.settings.lazyTagsLoadAutoDestroy&&
(this.wjs.destroy(a,b,!0),delete this.typesCounter[a][b],this.wjs.objectIsEmpty(this.typesCounter[a])&&delete this.typesCounter[a])}},useComplete:function(a,b){for(var c=0,d,e,f=Object.keys(b.options.lazyVisible),g,h;c<f.length;c++)for(g=Object.keys(b.options.lazyVisible[f[c]]),d=0;d<g.length;d++)for(h=b.options.lazyVisible[f[c]][g[d]],e=0;e<h.length;e++)this.tagFill(f[c],g[d],h[e],a[f[c]][g[d]])}})})(loader);