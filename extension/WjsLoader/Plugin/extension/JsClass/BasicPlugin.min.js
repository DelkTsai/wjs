// @require JsMethod > inheritMethodLinage
// @require JsMethod > inheritObject
(function(h){h.register("JsClass","BasicPlugin",{type:"Plugin",classExtends:"BasicBinder",variables:{binderType:"Binder",dom:!1,binders:{}},options:{binder:{defaults:null,define:function(a){a&&this.binderAdd(a);return a}}},overrides:{variables:{},methods:{}},backups:{variables:{},methods:{}},required:[],__construct:function(){this.required=this.wjs.inheritObject(this,"required",!0);this.wjs.inheritMethod(this,"__construct",arguments);this.pluginInit()},__destruct:function(){for(var a=0,d,b=Object.keys(this.methods);d=
b[a++];)"variables"!==d&&delete this.binder[d];this.wjs.inheritMethod(this,"__destruct",arguments)},binderAdd:function(a){a&&a.isA(this.binderType)||this.error("Binder type "+a.typeGlobal+" not allowed for plugin "+this.type+", expected "+this.binderType);for(var d=0,b,c,e=Object.keys(this.required),g,f=[];c=e[d++];)if(0===a.pluginsList.length)f.push(this.required[c]);else for(b=0;g=a.pluginsList[b++];)g.isA(this.required[c].type)||f.push(this.required[c]);a.pluginAddMultiple(f,void 0,!0);this.binders[a.id]=
a;if(this.overrides){this.overrides=this.wjs.inheritObject(this,"overrides");b=this.overrides.methods;e=Object.keys(b);this.backups.methods[a.id]=this.backups.methods[a.id]||{};for(d=0;c=e[d++];)this.backups.methods[a.id][c]=a[c],a[c]=this.wjs.inheritMethodLinage(a,a[c],b[c],[this]);if(this.overrides.variables){e=Object.keys(this.overrides.variables);this.backups.variables[a.id]=this.backups.variables[a.id]||{};for(d=0;c=e[d++];)this.backups.variables[a.id][c]=a[c];a.variableInitMultiple(this.overrides.variables)}}this.binderInit(a)},
binderRemove:function(a){this.binderExit(a);a.pluginRemoveMultiple(this.required);if(this.overrides){for(var d=0,b,c=Object.keys(this.overrides.methods);b=c[d++];)this.backups.methods[a.id]&&this.backups.methods[a.id][b]&&(a[b]=this.backups.methods[a.id][b],delete this.backups.methods[a.id][b]);delete this.backups.methods[a.id];if(this.overrides.variables&&this.overrides.variables[a.id]){c=Object.keys(this.overrides.variables);for(d=0;b=c[d++];)a[b]=this.backups.variables[a.id][b];delete this.backups.variables[a.id]}}delete this.binders[a.id]},
binderInit:function(a){},binderExit:function(a){},pluginInit:function(){},bindersCall:function(a,d){this.bindersEach(d?function(b){b.apply(a,d)}:function(b){b[a]()})},bindersEach:function(a){for(var d=0,b=Object.keys(this.binders),c;c=b[d++];)a(this.binders[c])}})})(WjsProto);