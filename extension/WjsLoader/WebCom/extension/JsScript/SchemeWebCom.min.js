// @require JsMethod > urlQueryParse
// @require JsMethod > urlQueryBuild
// @require JsMethod > urlQueryUpdate
// @require JsMethod > urlQueryParse
// @require JsMethod > urlQueryBuild
// @require JsMethod > isDomNode
// @require JsMethod > domAttributes
// @require JsMethod > cssAnimateCallback
// @require JsMethod > wjsIncludeExit
// @require JsMethod > isPlainObject
// @require JsMethod > inheritLinage
// @require JsMethod > inheritObject
// @require JsMethod > wjsIncludeInit
// @require JsMethod > inheritProperty
// @require JsMethod > cssSheetRules
// @require JsMethod > isPlainObject
// @require JsMethod > wjsHrefInit
// @require JsMethod > extend
// @require JsMethod > isPlainObject
// @require JsMethod > isPlainObject
// @require JsMethod > inheritProperty
(function(n){n.register("WebComScheme","SchemeWebCom",{classExtends:null,type:"WebCom",id:"",variables:{optionsInternal:{},optionsApplied:{},optionsDestroyed:{},domChildren:{},classLoadsNames:["fadeIn","loaded","fadeOut"],classLoads:{typeGlobal:!0},readyCallbacks:[]},options:{require:{defaults:!1,define:function(a,b){b&&(this.requiredWebCom=this.useInstances(b))},destroy:function(a,b){b&&this.destroyInstances(b,this.requiredWebCom)}},urlAlias:{defaults:!1},urlHistory:{defaults:!1,unique:!1,define:function(a,
b){if(b){var c=this.wjs,d="/"+c.settings.pathFull;if(this.urlAlias)"[root]"!==a.urlAlias&&(d+=a.urlAlias);else{a.optionApply("urlAlias");var e=a.loader.type,f=c.urlQueryParse();f[e]=f[e]||{};this.unique&&f[e]!==a.type?f[e]=a.type:f[e][a.id]=a.type;d+="?"+c.urlQueryBuild(f)}c.window.history.replaceState(null,null,d)}},destroy:function(a){if(this.applied){a=a.loader.type;var b=this.wjs.urlQueryParse();b[a]&&this.unique&&delete b[a]}}},cssClassInteraction:{defaults:null,define:function(a,b){return b?
b:a.typeGlobal}},dom:{defaults:!1,cssClasses:{defaults:[]},define:function(a,b,c){if(b=!0===b||"object"!==typeof b&&"string"===typeof c.html?"div":b){a.optionApply("cssClasses",c);a.optionApply("cssClassInteraction",c);a.optionApply("domImported",c);c=0;var d;d=a.optionsData.dom={};var e=this.wjs;d.domCreated=!e.isDomNode(b);b=d.domCreated?e.document.createElement(b):b;d.attributes=e.extendObject({},e.domAttributes(b));b.setAttribute("id",a.id);d.className=b.className;if(a.cssClasses)for(;d=a.cssClasses[c++];)b.classList.add(d);
return b}},destroy:function(a){if(a.dom){var b,c=0,d=a.optionsData.dom;b=Object.keys;for(var e=b(a.wjs.domAttributes(a.dom)).concat(b(d.attributes));b=e[c++];)d.attributes[b]?a.dom.setAttribute(b,d.attributes[b]):a.dom.removeAttribute(b);(a.domImported||d.domCreated)&&a.dom.parentNode.removeChild(a.dom)}}},domImported:{defaults:!1},domDestination:{defaults:null,define:function(a,b,c){a.optionApply("dom",c);(b||a.dom&&!a.dom.parentNode)&&a.dom&&a.dom!==a.wjs.document.body&&(b=b||a.wjs.document.body,
"string"===typeof b&&(b=a.wjs.document.querySelector(b)),b.appendChild(a.dom))}},html:{defaults:!1,define:function(a,b,c){"string"===typeof b&&(a.optionApply("dom",c),a.domChildAdd("html","div",b))}},cssFadeIn:{defaults:!1,define:function(a,b,c){a.optionApply("dom",c);if(a.dom){c=a.classLoads;var d=c.typeGlobal,e=a.cssRulesClassInit(),f=function(){a.domClassLoadAdd("loaded");b&&b.call(a)};(d=c.typeGlobal=void 0!==d?d:e)&&a.dom.classList.add(a.typeGlobal);c.fadeIn?this.wjs.cssAnimateCallback(a.dom,
"fadeIn",f):this.wjs.async(f)}}},cssFadeOut:{defaults:!1,define:function(a,b){a.optionsData.cssFadeOut=b},fadeOut:function(a){if(a.dom){a.domClassLoadAdd("fadeOutChildren");var b=function(){a.optionsData.cssFadeOut&&a.optionsData.cssFadeOut();a.__destructFadeOutOptionComplete()};this.wjs.wjsIncludeExit(a.dom,function(){a.classLoads.fadeOut?(a.__destructOptionsWaiting=!0,a.wjs.cssAnimateCallback(a.dom,"fadeOut",function(){b()})):b()})}else a.__destructFadeOutOptionComplete()}}},optionsDefault:{},optionsData:{},
mixin:[],__construct:function(a){var b=this.wjs,c=0,d=[],e={},f;b.extendObject(e,this.optionsDefault);b.extendObject(e,a||{});a=this.variables;this.variables={};this.variableInitMultiple(a);this.readonly("id","w"+b.loaders.WebCom.webCompCounter);this.loader.instances[this.id]=this;this.loader.instanceRegister(this);for(b=Object.keys(this.options);a=b[c++];)f=this.options[a],f.autoInit&&d.push(a),f.required&&void 0===e[a]&&void 0===f.defaults&&this.error('Missing option "'+a+'" and no defaults value');
b=Object.keys(e);for(c=0;a=b[c++];)this.options[a]||d.push(a);this.optionApplyMultiple(d,e);return e},__super:function(a,b){var c,d=this.__superProtos[a],e=c=d||this;do if(!(e=Object.getPrototypeOf(e)))return;while(!Object.getOwnPropertyDescriptor(e,a)||e[a]===c[a]);this.__superProtos[a]=e;c=this.__superProtos[a][a].apply(this,b);this.__superProtos[a]=d;return c},exit:function(a){this.__destruct(a)},cssRulesClassInit:function(){var a=!1,b,c,d=(b=this.wjs.extRequire[this.loader.type])&&b[this.type]?
b[this.type].CssLink:!1;if(d)for(b=0;c=d[b++];)c=this.wjs.get("CssLink",c),this.cssRulesClassSearch(c.sheet,this.typeGlobal)&&(a=!0);return a},cssRulesClassSearch:function(a,b){var c,d,e,f=!1,g,h,m,k,l=this.classLoads;c=this.wjs.cssSheetRules(a);for(d=0;k=c[d++];)if(k.selectorText)for(e=0;g=this.classLoadsNames[e++];)if(h="."+b+"."+g,m="."+g+"."+b,-1!==k.selectorText.indexOf(h)||-1!==k.selectorText.indexOf(m))l[g]=void 0!==l[g]?l[g]:!0,f=!0;return f},__destructFadeOutCount:1,__destructComplete:!1,
__destruct:function(a){var b=0,c=Object.keys(this.options);for(this.__destructComplete=a;a=c[b++];)this.options[a].fadeOut&&(this.__destructFadeOutCount++,this.options[a].fadeOut(this));this.__destructFadeOutOptionComplete()},__destructFadeOutOptionComplete:function(){0===--this.__destructFadeOutCount&&this.__destructFadeOutComplete()},__destructFadeOutComplete:function(){for(var a=0,b=Object.keys(this.options),c;c=this.options[b[a++]];)this.optionDestroy(c);for(a=0;c=this.optionsInternal[b[a++]];)this.optionDestroy(c),
this.loader.optionDestroy(c);var d=this;this.wjs.async(function(){delete d.wjs.loaders.WebCom.webComList[d.id];d.loader.instanceRemove(d);delete d._inheritMethodBases;delete d._inheritMethodPass;Object.seal(d);d.__destructComplete&&d.__destructComplete()})},method:function(a){return this[this.methodName(a)]},methodName:function(a){return"__"+a.split(".").join("__")},domChildAdd:function(a,b,c){this.domChildren[a]||(b="object"===typeof b?b:this.wjs.document.createElement(b||"div"),b.classList.add(a),
b.parentNode||this.dom.appendChild(b),this.domChildren[a]=b);this.domChildFill(a,c);return this.domChildGet(a)},domChildGet:function(a){return this.domChildren[a]},domChildFill:function(a,b){var c=this.domChildGet(a);b&&(c.innerHTML=b);this.wjs.wjsHrefInit(c);this.wjs.wjsIncludeInit(this.dom)},domClassLoadAdd:function(a){this.classLoads[a]&&this.dom.classList.add(a)},domClassLoadRemove:function(a){this.classLoads[a]&&this.dom.classList.remove(a)},variableInit:function(a,b){Object.defineProperty(this,
a,{set:function(b){return this.__variableSet(a,b)},get:function(){return this.__variableGet(a)},enumerable:!0,configurable:!0});var c=Array.isArray(b);if(this.wjs.isPlainObject(b)||c)b=this.wjs.extend(c?[]:{},b);this.variableSet(a,b)},readonly:function(a,b){Object.defineProperty(this,a,{writable:!1,value:b})},variableInitMultiple:function(a){for(var b=0,c=Object.keys(a),d;d=c[b++];)this.variableInit(d,a[d])},__variableSet:function(a,b){this.variables[a]=b},variableSet:function(a,b){this[a]=b},__variableGet:function(a){return this.variables[a]},
optionApplyMultiple:function(a,b){for(var c=0,d;d=a[c++];)this.optionApply(d,b)},optionApply:function(a,b){var c=this.options[a];c||(c=this.optionsInternal[a]=this.loader.optionCreate(this,"BasicWebComOptionDefault#"+a+"#"+this.id,a,{defaults:b[a]}));c.optionApply(this,b?b[a]:void 0,b)},optionDestroy:function(a){a.optionDestroy(this)},useInstances:function(a){var b=this,c=[];b.wjs.use(a,function(){if(a.WebCom)for(var d=0,e;e=a.WebCom[d++];)c.push(b.wjs.loaders.WebCom.instance(e))});return c},destroyInstances:function(a,
b){for(var c=this,d=0,e=0,f,g,h=[];f=b[d++];)g=f.loader.type,a[g]&&-1!==a[g].indexOf(f.type)&&(h.push(f),delete b[d++]);for(d=0;f=h[d++];)f.exit(function(){++e===h.length&&c.wjs.destroy(a)});return b},isA:function(a){return-1!==this.wjs.inheritProperty(this,"type").indexOf(a)},error:function(a){throw Error(a+" in "+this.typeGlobal+" #"+this.id);}})})(WjsProto);