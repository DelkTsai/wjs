// @require JsClass > BasicWebPage
// @require JsMethod > extEnable
// @require JsMethod > extDisable
(function(g){g.register("WjsLoader","WebPage",{loaderExtends:"WebComp",protoBaseClass:"BasicWebPage",pageCurrent:null,destroyDelay:5E3,__construct:function(){this.destroyTimeouts={};this.wjs.loaders.WebComp.__construct.call(this)},link:function(b){this.pageShow(b)},parse:function(b,a,c){return this.wjs.loaders.WebComp.parse.apply(this,arguments)},enable:function(b,a,c){c.options.webPagePreload||this.instance(b,a)},disable:function(){},instance:function(b,a){return this.pageCurrent=this.wjs.loaders.WebComp.instance.apply(this,
arguments)},pageChange:function(b){this.pageCurrent[b]&&this.pageHide(this.pageCurrent[b])},pageShow:function(b){var a=this.wjs;this.pageCurrent?this.pageHide(b):(this.destroyTimeouts[b]&&this.wjs.window.clearTimeout(this.destroyTimeouts[b]),a.get(this.type,b)?(a.extEnable(this.type,b),a.loaders[this.type].instance(b)):a.use(this.type,b))},pageHide:function(b){if(!this.pageHideStarted){var a=this,c=a.pageCurrent,d=!1,e=!1,f=function(){d&&e&&(a.wjs.extDisable(a.pageCurrent.loader.type,a.pageCurrent.type),
a.pageCurrent.loader.destroyTimeout(a.pageCurrent.type),a.pageCurrent=!1,a.pageHideStarted=!1,a.pageShow(b))};a.pageHideStarted=!0;a.wjs.use(this.type,b,{webPagePreload:!0,complete:function(){d=!0;f()}});c.exit(function(){e=!0;f()})}},destroyTimeout:function(b){var a=this;this.destroyTimeouts[b]=this.wjs.window.setTimeout(function(){a.wjs.destroy(a.type,b,{dependencies:!0});delete a.destroyTimeouts[b]},this.destroyDelay)}})})(WjsProto);