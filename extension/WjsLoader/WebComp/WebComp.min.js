// @require WjsLoader > JsClass
// @require WjsLoader > CssLink
// @require JsClass > BasicWebComp
// @require JsMethod > classProtoLineage
(function(c){c.register("WjsLoader","WebComp",{protoBaseClass:"BasicWebComp",__construct:function(){this.wjs.extendObject(this,{webCompCounter:0,webCompList:{},wjsShortcuts:!1,instancesCount:{}});c.proto.Loader.__construct.call(this)},parse:function(a,b,d){this.protoAdd(a,c.retrieve(this.type,a),a);c.proto.Loader.parse.apply(this,arguments);return b},protoName:function(a){return this.protoBaseClass+(a&&a!==this.protoBaseClass?"\\"+a:"")},protoAdd:function(a,b,d){var e,c,f=this.protoName(a);b=b||{};
b.type=a;b.loader=this;b.pack=d;b.classExtends=b.hasOwnProperty("classExtends")?b.classExtends:this.protoBaseClass;this.wjs.classExtend(f,b);b.typeGlobal=this.wjs.classProtoLineage(f).join("-");if(b.hasOwnProperty("bundle"))for(c=Object.keys(b.bundle),e=0;e<c.length;e++)this.protoAdd(a+"."+c[e],b.bundle[c[e]],d);return this.wjs.classMethods[f]},instance:function(a,b){var d=this.wjs,c=this.protoName(a);d.classMethods[c]||d.err("Methods not found for "+c);b=b||d.get(this.type,a)||{};b.loader=this;this.instancesCount[a]=
(this.instancesCount[a]||0)+1;return new (d.classProto(c))(b)},instanceDestroy:function(a){0===--this.instancesCount[a.type]&&delete this.instancesCount[a.type]},wjsInclude:function(a,b,c){a=this.wjs.get(a,b);a.dom=c;a.domImported=!0;this.instance(b,a)}})})(WjsProto);