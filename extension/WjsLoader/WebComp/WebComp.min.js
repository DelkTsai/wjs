// @require WjsLoader > JsClass
// @require WjsLoader > CssLink
// @require JsClass > BasicWebComp
(function(c){c.register("WjsLoader","WebComp",{protoBaseClass:"BasicWebComp",__construct:function(){this.wjs.extendObject(this,{webCompCounter:0,webCompList:{},wjsShortcuts:!1,instancesCount:{}});c.proto.Loader.__construct.call(this)},parse:function(a,b,e){this.protoAdd(a,c.retrieve(this.type,a),a);c.proto.Loader.parse.apply(this,arguments);return b},protoName:function(a){return this.protoBaseClass+(a&&a!==this.protoBaseClass?"\\"+a:"")},protoAdd:function(a,b,e){var d,c,f=this.protoName(a);b=b||{};
b.type=a;b.loader=this;b.pack=e;b.classExtends=b.hasOwnProperty("classExtends")?b.classExtends:this.protoBaseClass;this.wjs.classExtend(f,b);if(b.hasOwnProperty("bundle"))for(c=Object.keys(b.bundle),d=0;d<c.length;d++)this.protoAdd(a+"."+c[d],b.bundle[c[d]],e);return this.wjs.classMethods[f]},instance:function(a,b){var c=this.wjs,d=this.protoName(a);c.classMethods[d]||c.err("Methods not found for "+d);b=b||c.get(this.type,a)||{};b.loader=this;this.instancesCount[a]=(this.instancesCount[a]||0)+1;return new (c.classProto(d))(b)},
instanceDestroy:function(a){0===--this.instancesCount[a.type]&&delete this.instancesCount[a.type]}})})(WjsProto);