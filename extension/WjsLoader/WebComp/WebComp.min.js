// @require WjsLoader > JsClass
// @require WjsLoader > CssLink
// @require JsClass > BasicWebComp
(function(e){e.register("WjsLoader","WebComp",{protoBaseClass:"BasicWebComp",autoInstance:!1,__construct:function(){this.wjs.extendObject(this,{webCompCounter:0,webCompList:{},wjsShortcuts:!1,instancesCount:{}});e.proto.Loader.__construct.call(this)},parse:function(a,b,c){this.protoAdd(a,e.retrieve(this.type,a),a);(void 0!==c.options.autoInstance?c.options.autoInstance:this.autoInstance)&&this.instance(a,b);return b},protoName:function(a){return this.protoBaseClass+(a&&a!==this.protoBaseClass?"\\"+
a:"")},protoAdd:function(a,b,c){var d,f,e=this.protoName(a);b=b||{};b.type=a;b.loader=this;b.pack=c;b.classExtends=b.hasOwnProperty("classExtends")?b.classExtends:this.protoBaseClass;this.wjs.classExtend(e,b);if(b.hasOwnProperty("bundle"))for(f=Object.keys(b.bundle),d=0;d<f.length;d++)this.addCreatorItem(a+"."+f[d],b.bundle[f[d]],c);return this.wjs.classMethods[e]},instance:function(a,b){var c=this.wjs,d=this.protoName(a);c.classMethods[d]||c.err("Prototype not found for "+d);b=b||c.get(this.type,
a)||{};b.loader=this;this.instancesCount[a]=(this.instancesCount[a]||0)+1;return new (c.classProto(d))(b)},instanceDestroy:function(a){0===--this.instancesCount[a.type]&&delete this.instancesCount[a.type]}})})(WjsProto);