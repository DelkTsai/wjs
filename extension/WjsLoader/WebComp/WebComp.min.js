// @require WjsLoader > JsMethod
// @require WjsLoader > CssLink
// @require WjsLoader > JsLink
// @require WjsLoader > JsClass
// @require JsMethod > staticClass
// @require JsMethod > objectToArray
// @require JsMethod > urlQueryParse
// @require JsMethod > urlQueryBuild
// @require JsClass > WjsWebCompBaseClass
(function(e){e.wjs.loaderAdd("WebComp",{staticClasses:{},__construct:function(){this.wjs["ready"+this.type]=this.readyWebComp.bind(this);this.wjs["staticClass"+this.type]=this.staticClassWebComp.bind(this);this.readyCallbacks={};this.wjs.classMethods.WjsLoader.__construct.apply(this,arguments)},__destruct:function(){delete this.wjs["ready"+this.type];delete this.wjs["staticClass"+this.type];delete this.wjs.classMethods.WjsWebCompBaseClass},parse:function(c,a,b){var d=this.wjs;b=b.options.destination||
a.destination;a.dom=d.document.createElement("div");a.dom.innerHTML=a.html;a.dom.classList.add(this.type+"-"+c);b&&(a.domDestination="string"===typeof b?d.window.document.querySelector(b):b,a.domDestination.appendChild(a.dom),d.wjsHref&&d.wjsHref.linksInit(a.domDestination));a.urlUpdate&&(b=this.wjs.urlQueryParse(),b[this.type]=b[this.type]||[],a.group?(b[this.type][a.group]&&d.destroy(this.type,b[this.type][a.group],!0),b[this.type][a.group]=c):-1===b[this.type].indexOf(c)&&b[this.type].push(c),
this.wjs.window.history.replaceState(null,null,"?"+this.wjs.urlQueryBuild(b)));this.staticClasses[c]&&this.staticClasses[c].init&&(d.extendObject(this.staticClasses[c],a),this.staticClasses[c].init(a));return a},destroy:function(c,a,b){var d=!0;if(!(a instanceof this.wjs.window.Error)&&(this.staticClasses[c]&&this.staticClasses[c].exit&&(d=this.staticClasses[c].exit(this.type,c,a,b)),d&&a.dom.parentNode&&a.dom.parentNode.removeChild(a.dom),a.urlUpdate&&(b=this.wjs.urlQueryParse(),b[this.type]))){if(a.group)delete b[this.type][a.group];
else for(a=b[this.type].indexOf(c);-1!==a;)b[this.type].splice(a,1),a=b[this.type].indexOf(c);this.wjs.window.history.replaceState(null,null,"?"+this.wjs.urlQueryBuild(b))}return d},readyWebComp:function(c,a){this.readyCallbacks[c]=a.bind(wjs)},staticClassWebComp:function(c,a){a.classExtends=a.classExtends||"WjsWebCompBaseClass";this.staticClasses[c]=this.wjs.staticClass("WjsWebCompBaseClass"+c,a)}})})(wjsContext);