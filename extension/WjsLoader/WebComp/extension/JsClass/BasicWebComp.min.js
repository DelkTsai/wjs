// @require JsMethod > urlQueryParse
// @require JsMethod > urlQueryBuild
// @require JsMethod > urlQueryParse
// @require JsMethod > urlQueryBuild
// @require JsMethod > isDomNode
// @require JsMethod > domAttributes
// @require JsMethod > cssAnimateCallback
// @require JsMethod > wjsIncludeExit
// @require JsMethod > isPlainObject
// @require JsMethod > inheritLinage
// @require JsMethod > inheritObject
// @require JsMethod > wjsIncludeInit
// @require JsMethod > inheritProperty
// @require JsMethod > cssSheetRules
// @require JsMethod > isPlainObject
// @require JsMethod > wjsHrefInit
// @require JsMethod > extend
// @require JsMethod > isPlainObject
// @require JsMethod > isPlainObject
// @require JsMethod > objectFill
// @require JsMethod > inheritProperty
(function(n){n.register("JsClass","BasicWebComp",{type:"WebComp",typeGlobal:"WebComp",variables:{id:null,optionsApplied:[],dom:null,domChildren:{},classLoadsNames:["fadeIn","loaded","fadeOut"],classLoads:{typeGlobal:!0}},options:{require:{defaults:!1,define:function(a){a&&(this.options.require.requiredWebComp=this.useInstances(a))},destroy:function(a){a&&this.destroyInstances(a,this.options.require.requiredWebComp)}},urlAlias:{defaults:!1},urlHistory:{defaults:!1,unique:!1,define:function(a){if(a){a=
this.wjs;var b="/"+a.settings.pathFull;if(this.urlAlias)"[root]"!==this.urlAlias&&(b+=this.urlAlias);else{this.optionApply("urlAlias");var d=this.loader.type,c=a.urlQueryParse();c[d]=c[d]||[];if(this.options.urlHistory.unique&&c[d]!==this.type)c[d]=this.type;else if(-1===c[d].indexOf(this.type))c[d].push(this.type);else return;b+="?"+a.urlQueryBuild(c)}a.window.history.replaceState(null,null,b)}},destroy:function(){if(this.options.urlHistory.applied){var a=this.loader.type,b=this.wjs.urlQueryParse();
b[a]&&this.options.urlHistory.unique&&delete b[a]}}},cssClassInteraction:{defaults:null,define:function(a){return a?a:this.typeGlobal}},dom:{defaults:!1,backup:{domCreated:null,className:"",attributes:{}},cssClasses:{defaults:[]},domImported:{defaults:!1},define:function(a,b){if(a=!0===a||"object"!==typeof a&&"string"===typeof b.html?"div":a){this.optionApply("cssClasses",b);this.optionApply("cssClassInteraction",b);this.optionApply("domImported",b);var d=0,c,e;c=this.options.dom.backup;c.domCreated=
!this.wjs.isDomNode(a);e=c.domCreated?this.wjs.document.createElement(a):a;c.attributes=this.wjs.extendObject({},this.wjs.domAttributes(e));e.setAttribute("id",this.id);c.className=e.className;if(this.cssClasses)for(;c=this.cssClasses[d++];)e.classList.add(c);this.dom=e}},destroy:function(){if(this.dom){var a,b=0,d=this.options.dom.backup;a=Object.keys;for(var c=a(this.wjs.domAttributes(this.dom)).concat(a(d.attributes));a=c[b++];)d.attributes[a]?this.dom.setAttribute(a,d.attributes[a]):this.dom.removeAttribute(a);
(this.domImported||this.options.dom.backup.domCreated)&&this.dom.parentNode.removeChild(this.dom)}}},domDestination:{defaults:null,define:function(a,b){this.optionApply("dom",b);(a||this.dom&&!this.dom.parentNode)&&this.dom&&this.dom!==this.wjs.document.body&&(a=a||this.wjs.document.body,"string"===typeof a&&(a=this.wjs.document.querySelector(a)),a.appendChild(this.dom))}},html:{defaults:!1,define:function(a,b){"string"===typeof a&&(this.optionApply("dom",b),this.domChildAdd("html","div",a))}}},optionsDefault:{},
mixin:[],__construct:function(a){var b=this.wjs,d=0,c,e=[],g={},f;f=b.loaders.WebComp;this.variables=b.inheritObject(this,"variables");b.inheritLinage(this,"optionsDefault");b.inheritLinage(this,"options");for(b.inheritLinage(this,"mixin");c=this.mixin[d++];)this.mixinProto(c);b.extendObject(g,this.optionsDefault);b.extendObject(g,a||{});this.variableInitMultiple(this.variables);null===this.id&&(this.id="w"+f.webCompCounter,f.webCompCounter+=1);f.webCompList[this.id]=this;a=Object.keys(this.options);
for(d=0;b=a[d++];)c=this.options[b],(f=this.wjs.isPlainObject(c))&&!1===c.autoInit||e.push(b),f&&c.required&&void 0===g[b]&&void 0===c.defaults&&this.error('Missing option "'+b+'" and no defaults value');e=e.concat(Object.keys(g));this.optionApplyMultiple(e,g);if(this.dom){d=this.classLoads;e=d.typeGlobal;a=this.cssRulesClassInit();var h=this,b=function(){h.domClassLoadAdd("loaded")};(e=d.typeGlobal=void 0!==e?e:a)&&this.dom.classList.add(this.typeGlobal);d.fadeIn?this.wjs.cssAnimateCallback(this.dom,
"fadeIn",b):b()}return g},cssRulesClassInit:function(){var a=!1,b,d,c=(b=this.wjs.extRequire[this.loader.type])&&b[this.type]?b[this.type].CssLink:!1;if(c)for(b=0;d=c[b++];)d=this.wjs.get("CssLink",d),this.cssRulesClassSearch(d.sheet,this.typeGlobal)&&(a=!0);return a},cssRulesClassSearch:function(a,b){var d,c,e,g=!1,f,h,m,k,l=this.classLoads;d=this.wjs.cssSheetRules(a);for(c=0;k=d[c++];)if(k.selectorText)for(e=0;f=this.classLoadsNames[e++];)if(h="."+b+"."+f,m="."+f+"."+b,-1!==k.selectorText.indexOf(h)||
-1!==k.selectorText.indexOf(m))l[f]=void 0!==l[f]?l[f]:!0,g=!0;return g},__destruct:function(a){if(this.dom){var b=this,d=b.classLoads;this.domClassLoadAdd("fadeOutChildren");b.wjs.wjsIncludeExit(b.dom,function(){d.fadeOut?b.wjs.cssAnimateCallback(b.dom,"fadeOut",function(){b.__destructFadeComplete(a)}):b.__destructFadeComplete(a)})}else this.__destructFadeComplete(a)},__destructFadeComplete:function(a){for(var b=0,d=Object.keys(this.options),c;c=d[b++];)c=this.options[c],this.wjs.isPlainObject(c)&&
c.destroy&&c.destroy(c.applied);delete this.wjs.loaders.WebComp.webCompList[this.id];this.loader.instanceDestroy(this);delete this._inheritMethodBases;delete this._inheritMethodPass;Object.seal(this);a&&a()},exit:function(a){this.__destruct(a)},domChildAdd:function(a,b,d){this.domChildren[a]||(b="object"===typeof b?b:this.wjs.document.createElement(b||"div"),b.classList.add(a),b.parentNode||this.dom.appendChild(b),this.domChildren[a]=b);this.domChildFill(a,d);return this.domChildGet(a)},domChildGet:function(a){return this.domChildren[a]},
domChildFill:function(a,b){var d=this.domChildGet(a);b&&(d.innerHTML=b);this.wjs.wjsHrefInit(d);this.wjs.wjsIncludeInit(this.dom)},domClassLoadAdd:function(a){this.classLoads[a]&&this.dom.classList.add(a)},domClassLoadRemove:function(a){this.classLoads[a]&&this.dom.classList.remove(a)},variableInit:function(a,b){Object.defineProperty(this,a,{set:this.variableSetter(a),get:this.variableGetter(a),enumerable:!0,configurable:!0});this[a]=b},variableInitMultiple:function(a){for(var b=0,d=Object.keys(a),
c;c=d[b++];)this.variableInit(c,a[c])},variableSetter:function(a){return function(b){this.variableSetWrapper(a,b)}},variableGetter:function(a){return function(){return this.variableGetWrapper(a)}},variableSetWrapper:function(a,b){this.variables[a]=b},variableGetWrapper:function(a){return this.variables[a]},optionApplyMultiple:function(a,b){for(var d=0,c;c=a[d++];)this.optionApply(c,b)},optionApply:function(a,b){var d=this.options[a],c=this.wjs.isPlainObject(d),e;-1===this.optionsApplied.indexOf(a)&&
(this.optionsApplied.push(a),c||(d={defaults:d}),e=void 0!==b[a]?b[a]:d.defaults,d.applied=e,c&&d.define&&(e=d.define.apply(this,[e,b])),void 0!==e&&this.variableInit(a,e))},useInstances:function(a){var b=this,d=[];b.wjs.use(a,function(){if(a.WebComp)for(var c=0,e;e=a.WebComp[c++];)d.push(b.wjs.loaders.WebComp.instance(e))});return d},destroyInstances:function(a,b){for(var d=this,c=0,e=0,g,f,h=[];g=b[c++];)f=g.loader.type,a[f]&&-1!==a[f].indexOf(g.type)&&(h.push(g),delete b[c++]);for(c=0;g=h[c++];)g.exit(function(){++e===
h.length&&d.wjs.destroy(a)});return b},mixinProto:function(a){a=this.wjs.classMethods[a];this.mixinProtoItem(a,"variables");this.mixinProtoItem(a,"options");this.mixinProtoItem(a,"optionsDefault")},mixinProtoItem:function(a,b){a[b]&&(this[b]||(this[b]=Array.isArray(a[b])?[]:{}),this.wjs.objectFill(this[b],a[b],!0))},isA:function(a){return-1!==this.wjs.inheritProperty(this,"type").indexOf(a)},error:function(a){throw Error(a+" in "+this.typeGlobal+" #"+this.id);}})})(WjsProto);