// @require JsMethod > localClass
// @require JsMethod > objectToArray
// @require JsMethod > urlQueryParse
// @require JsMethod > urlQueryBuild
(function(e){e.wjs.classExtend("WjsWebCompLocalClass",{init:function(){return!0},exit:function(){return!0},webCompRemove:function(){this.dom.parentNode.removeChild(this.dom)}});e.wjs.loaderAdd("WebComp",{localClasses:{},__construct:function(){this.wjs.urlQueryParse();this.wjs["ready"+this.type]=this.readyWebComp.bind(this);this.wjs["localClass"+this.type]=this.localClassWebComp.bind(this);this.readyCallbacks={};this.wjs.classMethods.WjsLoader.__construct.apply(this,arguments);this.initParam=this.wjs.urlQueryParse()},
__destruct:function(){delete this.wjs["ready"+this.type];delete this.wjs["localClass"+this.type];delete this.wjs.classMethods.WjsWebCompLocalClass},init:function(){var b=0,a=this.initParam,c;if(a[this.type])for(c=Object.keys(a[this.type]);b<c.length;b++)this.wjs.use(this.type,a[this.type][c[b]])},parse:function(b,a,c){a.dom=this.wjs.document.createElement("div");a.dom.innerHTML=a.html;a.dom.setAttribute("id",this.type+"-"+b);a.destination&&(a.domDestination=this.wjs.window.document.querySelector(a.destination),
a.domDestination.appendChild(a.dom),this.wjs.linksInit(a.domDestination));a.urlUpdate&&(c=this.wjs.urlQueryParse(),c[this.type]=c[this.type]||[],a.group?(c[this.type][a.group]&&this.wjs.destroy(this.type,c[this.type][a.group],!0),c[this.type][a.group]=b):-1===c[this.type].indexOf(b)&&c[this.type].push(b),this.wjs.window.history.replaceState(null,null,"?"+this.wjs.urlQueryBuild(c)));this.localClasses[b]&&this.localClasses[b].init&&(this.wjs.extendObject(this.localClasses[b],a),this.localClasses[b].init(a));
return a},destroy:function(b,a,c){var d=!0;this.localClasses[b]&&this.localClasses[b].exit&&(d=this.localClasses[b].exit(a,c));d&&a.dom.parentNode.removeChild(a.dom);if(a.urlUpdate&&(c=this.wjs.urlQueryParse(),c[this.type])){if(a.group)delete c[this.type][a.group];else for(a=c[this.type].indexOf(b);-1!==a;)c[this.type].splice(a,1),a=c[this.type].indexOf(b);this.wjs.window.history.replaceState(null,null,"?"+this.wjs.urlQueryBuild(c))}return d},readyWebComp:function(b,a){this.readyCallbacks[b]=a.bind(wjs)},
localClassWebComp:function(b,a){a.classExtends=a.classExtends||"WjsWebCompLocalClass";this.localClasses[b]=this.wjs.localClass("WjsWebCompLocalClass"+b,a)}})})(wjsContext);